@using AsignarBusinessLayer.AsignarDatabaseDTOs
@using Signar.Models
@model ICollection<FilterDTO>
@{
    ViewBag.Title = "Search";
    UserDTO user = Cache[User.Identity.Name] as UserDTO;
}

<div class="container container-form">
    <div class="row" style="margin-top: 15px;">
        <div style="margin: 0px 0px 10px 0px">
            <div class="row">
                <div class="col-sm-6 col-xs-12" style="min-width: 400px;">
                    <h2 class="pull-left no-text-overflow-bigtext" id="ProjectName" style="margin: 20px 0px 0px 0px;">Search</h2>
                    @*@{
                            EditProjectModel m2 = new EditProjectModel();
                        }
                        @Html.Partial("~/Views/Popup/EditProject.cshtml", m2, new ViewDataDictionary { { "ProjectID", Model.ProjectID } })*@
                </div>
            </div>

            <div class="row" style="margin-top: 0px;">
                @*@{
                        ICollection<UserDTO> m1;
                        m1 = null;
                    }
                    <div id="AddUsersToProjectPopupDiv">
                        @Html.Partial("~/Views/Popup/AddUsersToProject.cshtml", m1, new ViewDataDictionary { { "ProjectID", Model.ProjectID } })
                    </div>*@
                <div style="width: 150px;">
                    <i class="fa fa-repeat fontbutton-style  fa-custom-button" style="padding: 5px 6px 4px 6px; margin: 24px 5px 5px 10px;" onclick="" data-placement="bottom" data-toggle="popover" data-trigger="hover" data-content="Default options"></i>
                    <i class="fa fa-filter fontbutton-style  fa-custom-button" style="padding: 5px 6px 5px 7px; margin: 24px 5px 5px 10px;" onclick="" data-placement="bottom" data-toggle="popover" data-trigger="hover" data-content="Choose filter"></i>
                    <i class="fa fa-save fontbutton-style  fa-custom-button" style="padding: 5px 7px 5px 7px; margin: 24px 5px 5px 10px;vertical-align: top; line-height: 15px;" onclick="" data-placement="bottom" data-toggle="popover" data-trigger="hover" data-content="Delete filter"></i>
                </div>
            </div>

            <div class="row">
                <div class="pull-left" style="margin-top: 5px; margin-left: 0px;">
                    <label class="short-info">Sort by:</label>
                    <div class="dropdown" style="display: inline">
                        <form style="display:inline">
                            <button class="dropdown-toggle bootrap-btndrop-modif" type="submit" data-toggle="dropdown" style="background: transparent !important;">
                                Title
                                <span class="caret" style="border-top-color: #92c1ba"></span>
                            </button>
                            <ul class="dropdown-menu bootrap-dropdown-ul-modif" style="padding: 0px">
                                <li><a href="#">Title</a></li>
                                <li><a href="#">Status</a></li>
                                <li><a href="#">Priority</a></li>
                                <li><a href="#">Assignee</a></li>
                            </ul>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    @{ 
        ICollection<BugDTO> mBugs = new List<BugDTO>();
    }
    <div id="AllTasks">
        @Html.Partial("~/Views/Home/TasksPartial.cshtml", mBugs)
    </div>
    
</div >

<script>
    $(document).ready(function(){
        $.ajax({
            type: "GET",
            url: "/Home/GetAllTasks",
            error: function (xhr, status, error) {
            },
            success: function (result) {
                $('#AllTasks').html(result);
            }
        });
    });
</script>

<script>
    function TaskClick(BugID) {
        @{
            string url3 = "/Home/Task/";
        }
        location.href = '@url3' + BugID;
    }
</script>